modules:
  - id: portionize_sections_v1
    stage: portionize
    capabilities: ["cyoa", "narrative"]
  - id: consensus_merge_v1
    stage: consensus
    capabilities: ["cyoa", "narrative"]
  - id: section_target_guard_v1
    stage: adapter
    capabilities: ["cyoa", "narrative"]
  - id: image_cropper_v1
    stage: extract
    capabilities: ["images"]
  - id: contact_sheet_builder_v1
    stage: intake
    capabilities: ["overview", "images"]
  - id: enrichment_v1
    stage: enrich
    capabilities: ["cyoa"]
  - id: strip_section_numbers_v1
    stage: clean
    capabilities: ["cyoa"]
  - id: backfill_missing_sections_v2
    stage: adapter
    capabilities: ["cyoa"]
  - id: backfill_missing_sections_llm_v1
    stage: adapter
    capabilities: ["cyoa"]
capabilities:
  - name: formulas
    modules: []
  - name: tables
    modules: []
  - name: images
    modules: ["image_cropper_v1", "contact_sheet_builder_v1"]
  - name: cyoa
    modules: ["portionize_sections_v1", "consensus_merge_v1", "enrichment_v1", "section_target_guard_v1", "strip_section_numbers_v1", "backfill_missing_sections_v2"]
  - name: genealogy
    modules: []
  - name: overview
    modules: ["contact_sheet_builder_v1"]
