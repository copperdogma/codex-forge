module_id: build_ff_engine_v1
stage: build
description: Build Fighting Fantasy Engine gamebook.json with provenance from resolved/enriched portions.
entrypoint: modules/export/build_ff_engine_v1/main.py
params:
  - name: pages
    desc: Path to clean_page JSONL (provides clean/raw text and page images)
    required: true
  - name: portions
    desc: Path to resolved or enriched portion JSONL
    required: true
  - name: out
    desc: Output gamebook JSON file
    required: true
  - name: title
    desc: Metadata title for the gamebook
    required: true
  - name: author
    desc: Metadata author (optional)
    required: false
  - name: start_section
    desc: Starting section id (string)
    required: false
    default: "1"
  - name: format_version
    desc: Gamebook format version string
    required: false
    default: "1.0.0"
notes: >
  Emits Fighting Fantasy Engine schema-compatible JSON with extra provenance
  retained under each section. Safe to run on resolved_portion or enriched_portion outputs.
