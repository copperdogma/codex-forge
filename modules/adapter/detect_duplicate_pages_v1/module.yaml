module_id: detect_duplicate_pages_v1
stage: adapter
entrypoint: modules/adapter/detect_duplicate_pages_v1/main.py
input_schema: page_html_v1
output_schema: page_html_v1
default_params:
  similarity_threshold: 0.95
  min_tokens: 80
  max_lookback: 3
  max_page_gap: 3
  header_overlap_threshold: 0.88
  require_header_overlap: true
  allow_frontmatter_dedupe: false
  frontmatter_max_page: 30
param_schema:
  properties:
    similarity_threshold:
      type: number
    min_tokens:
      type: integer
    max_lookback:
      type: integer
    max_page_gap:
      type: integer
    header_overlap_threshold:
      type: number
    require_header_overlap:
      type: boolean
    allow_frontmatter_dedupe:
      type: boolean
    frontmatter_max_page:
      type: integer
  required: []
notes: "Drop near-duplicate pages based on whole-page text similarity; emits duplicate_pages.json report."
