# DEPRECATED: superseded by recipe-ff-canonical.yaml (smoke stubs use recipe-ff-smoke instead)
run_id: deathtrap-ff-engine
input:
  pdf: input/06 deathtrap dungeon.pdf
output_dir: output/runs/deathtrap-ff-engine
stages:
- id: pages_stub
  stage: adapter
  module: load_stub_v1
  out: pages_clean.jsonl
  params:
    stub: testdata/smoke/ff/pages_clean.jsonl
    out: pages_clean.jsonl
- id: regions_stub
  stage: adapter
  module: load_stub_v1
  needs:
  - pages_stub
  out: regions.json
  params:
    stub: testdata/smoke/ff/regions.json
    out: regions.json
- id: headers_stub
  stage: adapter
  module: load_stub_v1
  needs:
  - pages_stub
  - regions_stub
  out: portion_hyp.jsonl
  params:
    stub: testdata/smoke/ff/portion_hyp.jsonl
    out: portion_hyp.jsonl
- id: resolve_main
  stage: adapter
  module: portion_hyp_to_resolved_v1
  needs:
  - headers_stub
  out: portions_resolved.jsonl
  params:
    out: portions_resolved.jsonl
- id: build_raw
  stage: build
  module: build_portions_v1
  needs:
  - pages_stub
  - resolve_main
  inputs:
    pages: pages_stub
    portions: resolve_main
  out: portions_final_raw.json
  params:
    out: portions_final_raw.json
