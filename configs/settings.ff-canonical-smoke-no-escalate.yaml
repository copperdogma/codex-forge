input:
  pdf: input/06 deathtrap dungeon.pdf

models:
  default: gpt-4.1-mini

stage_params:
  intake:
    dpi: 200
    engines: ["tesseract"]
    write_engine_dumps: false
    start: 1
    end: 20
  easyocr_guard:
    allow_missing: true
  escalate_vision:
    max_pages: 1
    budget_pages: 1
    dry_run: true
  coarse_segment_semantic:
    model: gpt-4.1-mini
    retry_model: gpt-4.1-mini
    max_lines: 4
    max_len: 80
  coverage_boundaries:
    min_present: 2  # Smoke uses 20 pages; coarse boundary pass often yields only 2
  gate_boundaries:
    min_count: 2
  assemble_boundaries:
    target_coverage: 0.005  # 20 pages; expect only a couple coarse boundaries
    max_escalation_pages: 5  # Reduce escalation for smoke test
  build_ff_engine:
    allow-stubs: true
    expected-range: "20-21"
  validate_ff_engine:
    expected_range_start: 20
    expected_range_end: 21
  validate_choice_completeness:
    max_discrepancy: 999
